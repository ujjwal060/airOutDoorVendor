import{r as o,j as e}from"./index-DMQZN-YT.js";import{a as f}from"./axios-B4uVmeYG.js";import{C as N,a as A}from"./CCardBody-DJt4bdLB.js";import{C as E}from"./CCardHeader-DaPF9maz.js";import{a as m}from"./index.es-Dr928r4n.js";import{C as D}from"./CCardText-B_2xx9bP.js";import{C as w,a as S,b as y,c as l,d as T,e as h}from"./CTable-CMobc8GF.js";import{C as F,a as d}from"./CPaginationItem-ixz3nRJf.js";import{C as M,a as P}from"./CModalHeader-D0deP1c3.js";import{C as B}from"./CModalTitle-eDClRaYZ.js";import{C as H}from"./CModalBody-cu4JkqK7.js";import{C as k}from"./CForm-BCH59H3k.js";import{C as a}from"./CCol-C5GETTd3.js";import{C as c}from"./CFormInput-BBxsUJtP.js";import{C as R}from"./CModalFooter-C3CBLEIu.js";import"./DefaultLayout-DUEFxvKU.js";import"./cil-user-Ddrdy7PS.js";import"./cil-lock-locked-DmxpJbVL.js";const ne=()=>{const[b,x]=o.useState(!1),[j,C]=o.useState([]),[t,g]=o.useState({extensionName:"",extensionDescription:"",extensionImage:null,price:"",role:"admin",shopId:""}),[V,u]=o.useState(null);o.useEffect(()=>{(async()=>{try{const s=await f.get("http://3.111.163.2:3002/api/Extension/getAll");C(s.data.data)}catch(s){u(s.response?s.response.data.message:"An error occurred while fetching extensions.")}})()},[]);const i=n=>{const{id:s,value:r,files:v}=n.target;g({...t,[s]:s==="extensionImage"?v[0]:r})},I=async n=>{n.preventDefault();const s=new FormData;s.append("extensionName",t.extensionName),s.append("extensionDescription",t.description),s.append("extensionImage",t.extensionImage),s.append("price",t.price),s.append("role",t.role),t.role==="vendor"&&s.append("shopId",t.shopId);try{const r=await f.post("http://3.111.163.2:3002/api/extension/addExtension",s,{headers:{"Content-Type":"multipart/form-data"}});C([...j,r.data]),x(!1),p()}catch(r){u(r.response?r.response.data.message:"An error occurred while adding the extension.")}},p=()=>{g({extensionName:"",extensionDescription:"",extensionImage:null,price:"",role:"admin",shopId:""})};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsxs(E,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h3",{children:"Manage Extensions"}),e.jsx(m,{color:"primary",onClick:()=>x(!0),children:"Add Extension"})]}),e.jsxs(A,{children:[e.jsx(D,{children:e.jsxs(w,{responsive:!0,striped:!0,hover:!0,bordered:!0,children:[e.jsx(S,{color:"dark",children:e.jsxs(y,{children:[e.jsx(l,{scope:"col",style:{textAlign:"center"},children:"S.No"}),e.jsx(l,{scope:"col",style:{textAlign:"center"},children:"Name"}),e.jsx(l,{scope:"col",style:{textAlign:"center"},children:"Price"}),e.jsx(l,{scope:"col",style:{textAlign:"center"},children:"Image"})]})}),e.jsx(T,{children:j.map((n,s)=>e.jsxs(y,{children:[e.jsx(l,{scope:"row",style:{textAlign:"center"},children:s+1}),e.jsx(h,{style:{textAlign:"center"},children:n.extensionName||"null"}),e.jsx(h,{style:{textAlign:"center"},children:n.price||"null"}),e.jsx(h,{style:{textAlign:"center"},children:n.image&&e.jsx("img",{src:`http://3.111.163.2:3002/${n.image}`,alt:n.extensionName,style:{width:"50px",height:"50px",objectFit:"cover"}})})]},n._id))})]})}),e.jsxs(F,{align:"center","aria-label":"Page navigation example",children:[e.jsx(d,{disabled:!0,"aria-label":"Previous",children:e.jsx("span",{"aria-hidden":"true",children:"«"})}),e.jsx(d,{active:!0,children:"1"}),e.jsx(d,{children:"2"}),e.jsx(d,{children:"3"}),e.jsx(d,{"aria-label":"Next",children:e.jsx("span",{"aria-hidden":"true",children:"»"})})]})]})]}),e.jsxs(M,{visible:b,onClose:()=>{x(!1),p()},children:[e.jsx(P,{closeButton:!0,children:e.jsx(B,{children:"Add Extension"})}),e.jsx(H,{children:e.jsxs(k,{className:"row g-3",onSubmit:I,children:[e.jsx(a,{md:6,children:e.jsx(c,{type:"text",id:"extensionName",label:"Name",value:t.extensionName,onChange:i})}),e.jsx(a,{md:6,children:e.jsx(c,{type:"text",id:"price",label:"Price",value:t.price,onChange:i})}),e.jsx(a,{md:6,children:e.jsx(c,{type:"text",id:"description",label:"Description",value:t.description,onChange:i})}),e.jsx(a,{md:6,children:e.jsx(c,{type:"file",id:"extensionImage",label:"Image",onChange:i})}),t.role==="vendor"&&e.jsx(a,{md:6,children:e.jsx(c,{type:"text",id:"shopId",label:"Shop ID",value:t.shopId,onChange:i})}),e.jsx(a,{xs:12,children:e.jsx(m,{color:"primary",type:"submit",children:"Submit"})})]})}),e.jsx(R,{children:e.jsx(m,{color:"secondary",onClick:()=>{x(!1),p()},children:"Close"})})]})]})};export{ne as default};
